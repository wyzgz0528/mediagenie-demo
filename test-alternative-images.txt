# å¤‡é€‰æ–¹æ¡?- ä½¿ç”¨ä¸åŒçš„é•œåƒæº

# æ–¹æ¡ˆ1: ä½¿ç”¨ Azure Container Registry å…¬å…±é•œåƒ
cat > test-container-acr.sh << 'EOF'
#!/bin/bash

TIMESTAMP=$(date +%m%d%H%M)
RESOURCE_GROUP="test-container-acr-$TIMESTAMP"

echo "=== Azure å®¹å™¨æµ‹è¯• (ACR å…¬å…±é•œåƒ) ==="
echo "æ—¶é—´æˆ? $TIMESTAMP"
echo "èµ„æºç»? $RESOURCE_GROUP"

az group create --name "$RESOURCE_GROUP" --location "East US"

# ä½¿ç”¨ Azure Container Registry å…¬å…±é•œåƒ
az container create \
    --resource-group "$RESOURCE_GROUP" \
    --name "test-$TIMESTAMP" \
    --image "mcr.microsoft.com/azuredocs/aci-helloworld:latest" \
    --dns-name-label "test-acr-$TIMESTAMP" \
    --ports 80 \
    --os-type Linux \
    --cpu 1 \
    --memory 1

az container show \
    --resource-group "$RESOURCE_GROUP" \
    --name "test-$TIMESTAMP" \
    --query "{name:name,state:containers[0].instanceView.currentState.state,fqdn:ipAddress.fqdn}" \
    --output table

echo "âœ?æµ‹è¯• URL: http://test-acr-$TIMESTAMP.eastus.azurecontainer.io"
echo "æ¸…ç†: az group delete --name $RESOURCE_GROUP --yes --no-wait"
EOF

# æ–¹æ¡ˆ2: ä½¿ç”¨æœ€å°åŒ– Alpine é•œåƒ
cat > test-container-alpine.sh << 'EOF'
#!/bin/bash

TIMESTAMP=$(date +%m%d%H%M)
RESOURCE_GROUP="test-alpine-$TIMESTAMP"

echo "=== Azure å®¹å™¨æµ‹è¯• (Alpine æœ€å°é•œåƒ? ==="

az group create --name "$RESOURCE_GROUP" --location "East US"

az container create \
    --resource-group "$RESOURCE_GROUP" \
    --name "alpine-test-$TIMESTAMP" \
    --image "mcr.microsoft.com/azure-cli:latest" \
    --dns-name-label "alpine-$TIMESTAMP" \
    --os-type Linux \
    --cpu 1 \
    --memory 1 \
    --command-line "sleep 3600"

az container show \
    --resource-group "$RESOURCE_GROUP" \
    --name "alpine-test-$TIMESTAMP" \
    --output table

echo "âœ?å¦‚æœæ˜¾ç¤º 'Succeeded'ï¼Œå®¹å™¨åŠŸèƒ½æ­£å¸¸ï¼"
echo "æ¸…ç†: az group delete --name $RESOURCE_GROUP --yes --no-wait"
EOF

chmod +x test-container-acr.sh
chmod +x test-container-alpine.sh

echo "å·²åˆ›å»?ä¸ªå¤‡é€‰æµ‹è¯•è„šæœ¬ï¼š"
echo "1. ./test-container-mcr.sh    (Microsoft å®˜æ–¹é•œåƒ)"
echo "2. ./test-container-acr.sh    (Azure Hello World ç¤ºä¾‹)"  
echo "3. ./test-container-alpine.sh (Azure CLI é•œåƒ)"
echo ""
echo "å»ºè®®ä¾æ¬¡å°è¯•ï¼Œç›´åˆ°æ‰¾åˆ°å¯ç”¨çš„é•œåƒæº?