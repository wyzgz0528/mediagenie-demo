# MediaGenie Azure Marketplace éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**MediaGenie** æ˜¯ä¸€ä¸ªåŸºäº?Azure è®¤çŸ¥æœåŠ¡çš„æ™ºèƒ½åª’ä½“å¤„ç†å¹³å°ï¼Œæä¾›ï¼?- ğŸ¤ è¯­éŸ³è½¬æ–‡æœ?(Speech-to-Text)
- ğŸ”Š æ–‡æœ¬è½¬è¯­éŸ?(Text-to-Speech)  
- ğŸ–¼ï¸?å›¾åƒåˆ†æ (Computer Vision)
- ğŸ’¬ GPT æ™ºèƒ½å¯¹è¯ (Azure OpenAI)

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?                   Azure Marketplace                         â”?â”?                                                             â”?â”? â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                â”?â”? â”? Frontend    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Backend    â”?                â”?â”? â”? (React)     â”?        â”? (FastAPI)   â”?                â”?â”? â”? Static Web  â”?        â”? Web App     â”?                â”?â”? â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”?                â”?â”?                                  â”?                         â”?â”?                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?         â”?â”?                   â”?                             â”?         â”?â”?          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”?         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?â”?          â”?Azure Speech    â”?         â”?Azure OpenAI     â”?â”?â”?          â”?Services        â”?         â”?Services         â”?â”?â”?          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?```

## ğŸ“¦ éƒ¨ç½²å‰å‡†å¤?
### 1. Azure æœåŠ¡è¦æ±‚

åœ¨éƒ¨ç½²å‰ï¼Œä½ éœ€è¦åœ¨ Azure Portal åˆ›å»ºä»¥ä¸‹æœåŠ¡å¹¶è·å–å¯†é’¥ï¼š

#### âœ?Azure OpenAI Service
1. è®¿é—® [Azure Portal](https://portal.azure.com)
2. åˆ›å»º "Azure OpenAI" èµ„æº
3. éƒ¨ç½² GPT-4 æ¨¡å‹ï¼ˆæ¨èï¼šgpt-4 æˆ?gpt-4-turboï¼?4. è·å–ï¼?   - **Endpoint**: `https://your-openai.openai.azure.com/`
   - **API Key**: åœ?"Keys and Endpoint" ä¸­è·å?   - **Deployment Name**: ä½ åˆ›å»ºçš„æ¨¡å‹éƒ¨ç½²åç§°

#### âœ?Azure Speech Services
1. åˆ›å»º "Speech Services" èµ„æº
2. é€‰æ‹©åŒºåŸŸï¼ˆæ¨èï¼šEast US æˆ?East Asiaï¼?3. è·å–ï¼?   - **API Key**: åœ?"Keys and Endpoint" ä¸­è·å?   - **Region**: ä¾‹å¦‚ `eastus` æˆ?`eastasia`

#### âœ?Azure Computer Vision (å¯é€?
1. åˆ›å»º "Computer Vision" èµ„æº
2. è·å–ï¼?   - **Endpoint**: `https://your-vision.cognitiveservices.azure.com/`
   - **API Key**: åœ?"Keys and Endpoint" ä¸­è·å?
### 2. æˆæœ¬ä¼°ç®—

| æœåŠ¡ | å®šä»·å±?| æœˆæˆæœ¬ï¼ˆä¼°ç®—ï¼?|
|------|--------|----------------|
| App Service Plan | B1 (Basic) | ~$13 USD |
| Storage Account | Standard | ~$1 USD |
| Azure OpenAI | Pay-as-you-go | æŒ‰ä½¿ç”¨é‡ |
| Speech Services | Pay-as-you-go | æŒ‰ä½¿ç”¨é‡ |
| **æ€»è®¡** | | **~$15 USD + ä½¿ç”¨è´?* |

## ğŸš€ éƒ¨ç½²æ–¹æ³•

### æ–¹æ³• 1: Azure Cloud Shell ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼?
#### æ­¥éª¤ 1: å‡†å¤‡éƒ¨ç½²è„šæœ¬

1. æ‰“å¼€ [Azure Cloud Shell](https://shell.azure.com)
2. é€‰æ‹© **Bash** ç¯å¢ƒ
3. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶ï¼?   ```bash
   # å¦‚æœä½ æœ‰é¡¹ç›®zipåŒ?   # ç‚¹å‡» Cloud Shell é¡¶éƒ¨çš?"ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶" å›¾æ ‡
   # ä¸Šä¼  MediaGenie-Deploy.zip
   
   # è§£å‹
   unzip MediaGenie-Deploy.zip
   cd MediaGenie-Deploy
   ```

#### æ­¥éª¤ 2: é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `deploy-cloudshell.sh` æ–‡ä»¶ï¼Œæ›¿æ¢ä»¥ä¸‹å˜é‡ï¼š

```bash
# æ‰“å¼€ç¼–è¾‘å™?code deploy-cloudshell.sh

# ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼?AZURE_OPENAI_KEY="ä½ çš„OpenAIå¯†é’¥"
AZURE_OPENAI_ENDPOINT="https://ä½ çš„openai.openai.azure.com/"
AZURE_SPEECH_KEY="ä½ çš„Speechå¯†é’¥"
AZURE_SPEECH_REGION="eastus"  # ä½ çš„SpeechæœåŠ¡åŒºåŸŸ
```

#### æ­¥éª¤ 3: æ‰§è¡Œéƒ¨ç½²

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy-cloudshell.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy-cloudshell.sh
```

éƒ¨ç½²è¿‡ç¨‹å¤§çº¦éœ€è¦?**5-10 åˆ†é’Ÿ**ã€?
#### æ­¥éª¤ 4: éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œè„šæœ¬ä¼šæ˜¾ç¤ºï¼š
```
ğŸ‰ éƒ¨ç½²å®Œæˆ!

ğŸ“‹ éƒ¨ç½²ä¿¡æ¯:
  åº”ç”¨åç§°:      mediagenie-abc123
  åº”ç”¨ä¸»é¡µ:      https://mediagenie-abc123.azurewebsites.net
  APIæ–‡æ¡£:       https://mediagenie-abc123.azurewebsites.net/docs
  å¥åº·æ£€æŸ?      https://mediagenie-abc123.azurewebsites.net/health
```

è®¿é—®å¥åº·æ£€æŸ¥URLï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "status": "healthy",
  "timestamp": "2025-01-21T10:30:00Z",
  "services": {
    "speech": "available",
    "vision": "not_configured",
    "storage": "not_configured"
  }
}
```

### æ–¹æ³• 2: Azure Portal ARM æ¨¡æ¿éƒ¨ç½²

#### æ­¥éª¤ 1: å‡†å¤‡ ARM æ¨¡æ¿

1. åœ?Azure Portal ä¸­ï¼Œæœç´¢ "Deploy a custom template"
2. ç‚¹å‡» "Build your own template in the editor"
3. ä¸Šä¼  `azuredeploy.json` æ–‡ä»¶

#### æ­¥éª¤ 2: å¡«å†™å‚æ•°

- **Site Name**: åº”ç”¨åç§°ï¼ˆä¾‹å¦‚ï¼šmediagenie-prodï¼?- **Location**: åŒºåŸŸï¼ˆä¾‹å¦‚ï¼šEast USï¼?- **SKU**: å®šä»·å±‚ï¼ˆæ¨èï¼šB1ï¼?- **Azure OpenAI Key**: ä½ çš„ OpenAI API å¯†é’¥
- **Azure OpenAI Endpoint**: ä½ çš„ OpenAI ç«¯ç‚¹
- **Azure Speech Key**: ä½ çš„ Speech API å¯†é’¥
- **Azure Speech Region**: ä½ çš„ Speech æœåŠ¡åŒºåŸŸ

#### æ­¥éª¤ 3: éƒ¨ç½²ä»£ç 

ARM æ¨¡æ¿ä¼šåˆ›å»ºåŸºç¡€è®¾æ–½ï¼Œä½†ä½ è¿˜éœ€è¦éƒ¨ç½²ä»£ç ï¼š

```bash
# åœ¨æœ¬åœ°æˆ– Cloud Shell ä¸?cd backend/media-service

# åˆ›å»ºéƒ¨ç½²åŒ?zip -r deploy.zip . -x "*.pyc" -x "__pycache__/*" -x "logs/*"

# ä½¿ç”¨ Azure CLI éƒ¨ç½²
az webapp deployment source config-zip \
  --resource-group MediaGenie-RG \
  --name your-app-name \
  --src deploy.zip
```

### æ–¹æ³• 3: GitHub Actions CI/CDï¼ˆé«˜çº§ï¼‰

åˆ›å»º `.github/workflows/azure-deploy.yml`ï¼?
```yaml
name: Deploy to Azure

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.10'
      
      - name: Install dependencies
        run: |
          cd backend/media-service
          pip install -r requirements.txt
      
      - name: Deploy to Azure Web App
        uses: azure/webapps-deploy@v2
        with:
          app-name: ${{ secrets.AZURE_WEBAPP_NAME }}
          publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
          package: backend/media-service
```

## ğŸ”§ éƒ¨ç½²åé…ç½?
### 1. é…ç½® CORSï¼ˆå¦‚æœéœ€è¦å‰ç«¯ï¼‰

```bash
az webapp cors add \
  --resource-group MediaGenie-RG \
  --name your-app-name \
  --allowed-origins "https://yourdomain.com"
```

### 2. å¯ç”¨åº”ç”¨æ—¥å¿—

```bash
az webapp log config \
  --resource-group MediaGenie-RG \
  --name your-app-name \
  --application-logging filesystem \
  --level information
```

### 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
az webapp log tail \
  --resource-group MediaGenie-RG \
  --name your-app-name
```

## ğŸ§ª æµ‹è¯•éƒ¨ç½²

### 1. å¥åº·æ£€æŸ?
```bash
curl https://your-app-name.azurewebsites.net/health
```

### 2. æµ‹è¯•æ–‡æœ¬è½¬è¯­éŸ?
```bash
curl -X POST https://your-app-name.azurewebsites.net/api/speech/text-to-speech \
  -H "Content-Type: application/json" \
  -d '{"text": "ä½ å¥½ï¼Œè¿™æ˜¯æµ‹è¯?, "voice": "zh-CN-XiaoxiaoNeural"}' \
  --output test.mp3
```

### 3. æµ‹è¯• GPT å¯¹è¯

```bash
curl -X POST https://your-app-name.azurewebsites.net/api/gpt/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹MediaGenie"}'
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ?
### æŸ¥çœ‹åº”ç”¨æŒ‡æ ‡

1. è®¿é—® [Azure Portal](https://portal.azure.com)
2. å¯¼èˆªåˆ°ä½ çš?Web App
3. æŸ¥çœ‹ "Metrics" å’?"Logs"

### å¸¸ç”¨ç›‘æ§å‘½ä»¤

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€?az webapp show \
  --resource-group MediaGenie-RG \
  --name your-app-name \
  --query state

# é‡å¯åº”ç”¨
az webapp restart \
  --resource-group MediaGenie-RG \
  --name your-app-name

# æŸ¥çœ‹é…ç½®
az webapp config appsettings list \
  --resource-group MediaGenie-RG \
  --name your-app-name
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ 1: åº”ç”¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: è®¿é—®URLè¿”å› 503 é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹æ—¥å¿—
az webapp log tail -n your-app-name -g MediaGenie-RG

# æ£€æŸ¥å¯åŠ¨å‘½ä»?az webapp config show -n your-app-name -g MediaGenie-RG --query linuxFxVersion
```

### é—®é¢˜ 2: Azure æœåŠ¡è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**: API è¿”å› "service not available"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½?2. éªŒè¯ Azure æœåŠ¡å¯†é’¥æ˜¯å¦æœ‰æ•ˆ
3. ç¡®è®¤æœåŠ¡åŒºåŸŸåŒ¹é…

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡?az webapp config appsettings list -n your-app-name -g MediaGenie-RG
```

### é—®é¢˜ 3: æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**: å“åº”ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**:
1. å‡çº§åˆ°æ›´é«˜çš„å®šä»·å±‚ï¼ˆB2 æˆ?S1ï¼?2. å¯ç”¨ Application Insights
3. ä¼˜åŒ–ä»£ç å’Œæ•°æ®åº“æŸ¥è¯¢

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Azure App Service æ–‡æ¡£](https://docs.microsoft.com/azure/app-service/)
- [Azure OpenAI æ–‡æ¡£](https://docs.microsoft.com/azure/cognitive-services/openai/)
- [Azure Speech Services æ–‡æ¡£](https://docs.microsoft.com/azure/cognitive-services/speech-service/)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/)

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼?1. æŸ¥çœ‹ [GitHub Issues](https://github.com/your-org/MediaGenie/issues)
2. è”ç³»æŠ€æœ¯æ”¯æŒ? support@smartwebco.com
3. æŸ¥çœ‹ Azure æ”¯æŒæ–‡æ¡£

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

