# MediaGenie Azure å‘½ä»¤é€ŸæŸ¥è¡?
## ğŸš€ éƒ¨ç½²å‘½ä»¤

### Cloud Shell éƒ¨ç½²ï¼ˆå®Œæ•´æµç¨‹ï¼‰

```bash
# 1. ä¸Šä¼  MediaGenie-Azure-Deploy.zip åˆ?Cloud Shell

# 2. è§£å‹
unzip MediaGenie-Azure-Deploy.zip

# 3. è¿›å…¥ç›®å½•
cd MediaGenie-Azure-Deploy

# 4. ç¼–è¾‘é…ç½®ï¼ˆå¡«å…¥ä½ çš„å¯†é’¥ï¼‰
code deploy-cloudshell.sh

# 5. æ‰§è¡Œéƒ¨ç½²
chmod +x deploy-cloudshell.sh
./deploy-cloudshell.sh
```

### å¿«é€Ÿé‡æ–°éƒ¨ç½?
```bash
# å¦‚æœå·²ç»éƒ¨ç½²è¿‡ï¼Œåªéœ€æ›´æ–°ä»£ç 
cd MediaGenie-Azure-Deploy
./deploy-cloudshell.sh
```

---

## ğŸ” éªŒè¯å’Œæµ‹è¯•å‘½ä»?
### å¥åº·æ£€æŸ?
```bash
# æ›¿æ¢ your-app-name ä¸ºå®é™…åº”ç”¨åç§?curl https://your-app-name.azurewebsites.net/health
```

**é¢„æœŸå“åº”**:
```json
{
  "status": "healthy",
  "timestamp": "2025-10-21T...",
  "services": {
    "speech": "available",
    "vision": "not_configured"
  }
}
```

### æµ‹è¯•æ–‡æœ¬è½¬è¯­éŸ?(TTS)

```bash
curl -X POST https://your-app-name.azurewebsites.net/api/speech/text-to-speech \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ä½ å¥½ï¼Œè¿™æ˜¯MediaGenieæµ‹è¯•",
    "voice": "zh-CN-XiaoxiaoNeural"
  }' \
  --output test.mp3
```

### æµ‹è¯•è¯­éŸ³è½¬æ–‡æœ?(STT)

```bash
# éœ€è¦å…ˆå‡†å¤‡ä¸€ä¸ªéŸ³é¢‘æ–‡ä»?audio.wav
curl -X POST https://your-app-name.azurewebsites.net/api/speech/speech-to-text \
  -F "file=@audio.wav" \
  -F "language=zh-CN"
```

### æµ‹è¯• GPT å¯¹è¯

```bash
curl -X POST https://your-app-name.azurewebsites.net/api/gpt/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹MediaGenieçš„åŠŸèƒ?
  }'
```

### æµ‹è¯•å›¾åƒåˆ†æ

```bash
# éœ€è¦å…ˆå‡†å¤‡ä¸€ä¸ªå›¾ç‰‡æ–‡ä»?image.jpg
curl -X POST https://your-app-name.azurewebsites.net/api/vision/image-analysis \
  -F "file=@image.jpg"
```

---

## ğŸ“Š ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹åº”ç”¨ä¿¡æ¯

```bash
# æŸ¥çœ‹åº”ç”¨è¯¦æƒ…
az webapp show \
  --name your-app-name \
  --resource-group MediaGenie-RG

# æŸ¥çœ‹åº”ç”¨ URL
az webapp show \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --query defaultHostName \
  --output tsv
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æ—¥å¿—æµ?az webapp log tail \
  --name your-app-name \
  --resource-group MediaGenie-RG

# ä¸‹è½½æ—¥å¿—
az webapp log download \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --log-file logs.zip
```

### é‡å¯åº”ç”¨

```bash
# é‡å¯ Web App
az webapp restart \
  --name your-app-name \
  --resource-group MediaGenie-RG

# åœæ­¢åº”ç”¨
az webapp stop \
  --name your-app-name \
  --resource-group MediaGenie-RG

# å¯åŠ¨åº”ç”¨
az webapp start \
  --name your-app-name \
  --resource-group MediaGenie-RG
```

---

## âš™ï¸ é…ç½®ç®¡ç†

### æŸ¥çœ‹ç¯å¢ƒå˜é‡

```bash
# åˆ—å‡ºæ‰€æœ‰åº”ç”¨è®¾ç½?az webapp config appsettings list \
  --name your-app-name \
  --resource-group MediaGenie-RG

# æŸ¥çœ‹ç‰¹å®šè®¾ç½®
az webapp config appsettings list \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --query "[?name=='AZURE_OPENAI_KEY']"
```

### æ›´æ–°ç¯å¢ƒå˜é‡

```bash
# æ›´æ–°å•ä¸ªè®¾ç½®
az webapp config appsettings set \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --settings AZURE_OPENAI_KEY="new-key-here"

# æ›´æ–°å¤šä¸ªè®¾ç½®
az webapp config appsettings set \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --settings \
    AZURE_OPENAI_KEY="new-key" \
    AZURE_SPEECH_KEY="new-key"
```

### åˆ é™¤ç¯å¢ƒå˜é‡

```bash
az webapp config appsettings delete \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --setting-names SETTING_NAME
```

---

## ğŸ“ˆ ç›‘æ§å‘½ä»¤

### æŸ¥çœ‹åº”ç”¨æŒ‡æ ‡

```bash
# CPU ä½¿ç”¨ç?az monitor metrics list \
  --resource /subscriptions/{subscription-id}/resourceGroups/MediaGenie-RG/providers/Microsoft.Web/sites/your-app-name \
  --metric "CpuPercentage" \
  --interval PT1H

# å†…å­˜ä½¿ç”¨ç?az monitor metrics list \
  --resource /subscriptions/{subscription-id}/resourceGroups/MediaGenie-RG/providers/Microsoft.Web/sites/your-app-name \
  --metric "MemoryPercentage" \
  --interval PT1H

# HTTP è¯·æ±‚æ•?az monitor metrics list \
  --resource /subscriptions/{subscription-id}/resourceGroups/MediaGenie-RG/providers/Microsoft.Web/sites/your-app-name \
  --metric "Requests" \
  --interval PT1H
```

### æŸ¥çœ‹åº”ç”¨çŠ¶æ€?
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡?az webapp show \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --query state \
  --output tsv
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### æŸ¥çœ‹éƒ¨ç½²å†å²

```bash
az webapp deployment list \
  --name your-app-name \
  --resource-group MediaGenie-RG
```

### SSH åˆ°å®¹å™?
```bash
# æ‰“å¼€ SSH ä¼šè¯
az webapp ssh \
  --name your-app-name \
  --resource-group MediaGenie-RG
```

### æŸ¥çœ‹å®¹å™¨æ—¥å¿—

```bash
# æŸ¥çœ‹ Docker æ—¥å¿—
az webapp log tail \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --provider docker
```

### è¯Šæ–­é—®é¢˜

```bash
# è¿è¡Œè¯Šæ–­
az webapp show \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --query "{state:state, availabilityState:availabilityState}"
```

---

## ğŸ—‘ï¸?æ¸…ç†å‘½ä»¤

### åˆ é™¤åº”ç”¨ï¼ˆä¿ç•™èµ„æºç»„ï¼?
```bash
az webapp delete \
  --name your-app-name \
  --resource-group MediaGenie-RG
```

### åˆ é™¤æ•´ä¸ªèµ„æºç»?
```bash
# åˆ é™¤æ‰€æœ‰èµ„æºï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰
az group delete \
  --name MediaGenie-RG \
  --yes \
  --no-wait
```

### æŸ¥çœ‹åˆ é™¤çŠ¶æ€?
```bash
az group show \
  --name MediaGenie-RG \
  --query properties.provisioningState
```

---

## ğŸ’° æˆæœ¬ç®¡ç†

### æŸ¥çœ‹æˆæœ¬

```bash
# æŸ¥çœ‹èµ„æºç»„æˆæœ¬ï¼ˆéœ€è¦?Cost Management æƒé™ï¼?az consumption usage list \
  --start-date 2025-10-01 \
  --end-date 2025-10-31 \
  --query "[?contains(instanceId, 'MediaGenie-RG')]"
```

### æ›´æ”¹å®šä»·å±?
```bash
# å‡çº§åˆ?B2
az appservice plan update \
  --name your-plan-name \
  --resource-group MediaGenie-RG \
  --sku B2

# é™çº§åˆ?F1ï¼ˆå…è´¹å±‚ï¼?az appservice plan update \
  --name your-plan-name \
  --resource-group MediaGenie-RG \
  --sku F1
```

---

## ğŸ” å®‰å…¨å‘½ä»¤

### é…ç½® HTTPS

```bash
# å¼ºåˆ¶ HTTPS
az webapp update \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --https-only true
```

### é…ç½® CORS

```bash
# å…è®¸æ‰€æœ‰æ¥æºï¼ˆå¼€å‘ç¯å¢ƒï¼‰
az webapp cors add \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --allowed-origins '*'

# å…è®¸ç‰¹å®šæ¥æºï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
az webapp cors add \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --allowed-origins 'https://yourdomain.com'
```

---

## ğŸ“¦ å¤‡ä»½å’Œæ¢å¤?
### åˆ›å»ºå¤‡ä»½

```bash
# é…ç½®å¤‡ä»½
az webapp config backup create \
  --resource-group MediaGenie-RG \
  --webapp-name your-app-name \
  --backup-name backup1 \
  --container-url "https://yourstorageaccount.blob.core.windows.net/backups?{SAS-token}"
```

### åˆ—å‡ºå¤‡ä»½

```bash
az webapp config backup list \
  --resource-group MediaGenie-RG \
  --webapp-name your-app-name
```

### æ¢å¤å¤‡ä»½

```bash
az webapp config backup restore \
  --resource-group MediaGenie-RG \
  --webapp-name your-app-name \
  --backup-name backup1 \
  --container-url "https://yourstorageaccount.blob.core.windows.net/backups?{SAS-token}"
```

---

## ğŸŒ åŸŸåé…ç½®

### æ·»åŠ è‡ªå®šä¹‰åŸŸå?
```bash
# æ·»åŠ åŸŸå
az webapp config hostname add \
  --webapp-name your-app-name \
  --resource-group MediaGenie-RG \
  --hostname www.yourdomain.com
```

### ç»‘å®š SSL è¯ä¹¦

```bash
# ä¸Šä¼ è¯ä¹¦
az webapp config ssl upload \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --certificate-file certificate.pfx \
  --certificate-password password

# ç»‘å®šè¯ä¹¦
az webapp config ssl bind \
  --name your-app-name \
  --resource-group MediaGenie-RG \
  --certificate-thumbprint {thumbprint} \
  --ssl-type SNI
```

---

## ğŸ“ å¿«é€Ÿå‚è€?
### å¸¸ç”¨å˜é‡

```bash
# è®¾ç½®å˜é‡æ–¹ä¾¿ä½¿ç”¨
APP_NAME="your-app-name"
RG_NAME="MediaGenie-RG"
LOCATION="eastus"

# ä½¿ç”¨å˜é‡
az webapp restart --name $APP_NAME --resource-group $RG_NAME
```

### ä¸€é”®å‘½ä»¤ç»„å?
```bash
# éƒ¨ç½²å¹¶éªŒè¯?./deploy-cloudshell.sh && \
curl https://$(az webapp show -n $APP_NAME -g $RG_NAME --query defaultHostName -o tsv)/health

# é‡å¯å¹¶æŸ¥çœ‹æ—¥å¿?az webapp restart -n $APP_NAME -g $RG_NAME && \
az webapp log tail -n $APP_NAME -g $RG_NAME
```

---

## ğŸ†˜ ç´§æ€¥å‘½ä»?
### å¿«é€Ÿå›æ»?
```bash
# åœæ­¢åº”ç”¨
az webapp stop -n $APP_NAME -g $RG_NAME

# æ¢å¤ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ˆå¦‚æœæœ‰å¤‡ä»½ï¼‰
az webapp config backup restore ...

# å¯åŠ¨åº”ç”¨
az webapp start -n $APP_NAME -g $RG_NAME
```

### ç´§æ€¥æ‰©å®?
```bash
# å¿«é€Ÿå‡çº§åˆ°æ›´é«˜é…ç½®
az appservice plan update \
  --name your-plan-name \
  --resource-group $RG_NAME \
  --sku P1V2
```

---

**æç¤º**: å°?`your-app-name` æ›¿æ¢ä¸ºä½ çš„å®é™…åº”ç”¨åç§°ï¼

**ä¿å­˜æ­¤æ–‡ä»¶ä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾å‘½ä»¤ï¼** ğŸ“Œ

